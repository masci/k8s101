<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Pods - k8s101</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">k8s101</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Course units <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../010-first-contact/" class="dropdown-item">First contact</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Pods</a>
</li>
                                    
<li>
    <a href="../030-declarative/" class="dropdown-item">Going declarative</a>
</li>
                                    
<li>
    <a href="../040-labels/" class="dropdown-item">Labels</a>
</li>
                                    
<li>
    <a href="../050-annotations/" class="dropdown-item">Annotations</a>
</li>
                                    
<li>
    <a href="../060-deployments/" class="dropdown-item">Deployments</a>
</li>
                                    
<li>
    <a href="../070-services/" class="dropdown-item">Services</a>
</li>
                                    
<li>
    <a href="../080-ingress/" class="dropdown-item">Ingress</a>
</li>
                                    
<li>
    <a href="../090-configmaps/" class="dropdown-item">Config Maps</a>
</li>
                                    
<li>
    <a href="../100-secrets/" class="dropdown-item">Secrets</a>
</li>
                                    
<li>
    <a href="../110-helm/" class="dropdown-item">Helm</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../010-first-contact/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../030-declarative/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/masci/k8s101/tree/master/src/020-pods.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#pods" class="nav-link">Pods</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#exercise-n1-create-a-pod" class="nav-link">Exercise n.1: create a Pod</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#exercise-n2-interact-with-a-pod" class="nav-link">Exercise n.2: interact with a Pod</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="pods">Pods</h1>
<p>A <strong>Pod</strong> is the minimum deployable unit on kubernetes and consists of one or more
Docker containers. You can’t “run a container” in a Kubernetes cluster but you
can schedule and “run a pod”.</p>
<p>If we keep using the Operating System metaphor, a pod would be a process
and its containers would be threads: each container has its own life
(for example it has separated cgroups) but at the same time it's strongly coupled
with the other containers in the pod by having shared namespaces, same hostname,
same IP address and same open ports.</p>
<p>It's important to note that a pod is atomic and it always runs on one node of the
Cluster. In other words, all the containers in a pod always lands in the same
Node of the Cluster.</p>
<h2 id="exercise-n1-create-a-pod">Exercise n.1: create a Pod</h2>
<p>First of all, create a pod called <code>nginx-pod</code> running a single container and
pulling the <code>nginx</code> image from Dockerhub:</p>
<pre><code class="sh">$ kubectl run nginx-pod --generator=run-pod/v1 --image=nginx
Flag --generator has been deprecated, has no effect and will be removed in the future.
pod/nginx-pod created
</code></pre>

<blockquote>
<p>Please ignore the deprecation warning for now, this command is only meaningful in the
context of this course and you wouldn't use it in a real world scenario.</p>
</blockquote>
<p>Now to get the list of running pods run:</p>
<pre><code class="sh">$ kubectl get pods
NAME        READY   STATUS    RESTARTS   AGE
nginx-pod   1/1     Running   0          104s
</code></pre>

<p>As we mentioned in the previous unit, we can get a lot more info about an Object
using <code>describe</code>, let's do it with our pod:</p>
<pre><code class="sh">$ kubectl describe pod nginx-pod
Name:         nginx-pod
Namespace:    default
...
</code></pre>

<p>Finally, we can delete the pod:</p>
<pre><code class="sh">$ kubectl delete pods nginx-pod
pod &quot;nginx-pod&quot; deleted
</code></pre>

<h2 id="exercise-n2-interact-with-a-pod">Exercise n.2: interact with a Pod</h2>
<p>Let's create the same pod again but this time we expose its TCP port
number 80:</p>
<pre><code class="sh">kubectl run nginx-pod --generator=run-pod/v1 --image=nginx --port 80
</code></pre>

<p>The port is only exposed within the <strong>Cluster</strong> but there's a way to easily
open a connection tunnel to our local host at the port 8080 by running:</p>
<pre><code class="sh">$ kubectl port-forward nginx-pod 8080:80
Forwarding from 127.0.0.1:8080 -&gt; 80
Forwarding from [::1]:8080 -&gt; 80kubectl port-forward nginx-pod 8080:80
Forwarding from 127.0.0.1:8080 -&gt; 80
Forwarding from [::1]:8080 -&gt; 80
</code></pre>

<p>The tunnel will stay open until you hit CTRL+C, in the meantime you can open the
browser at http://localhost:8080 and see the pod serving requests.</p>
<p>Last but not least, we can also get logs for our pod by running:</p>
<pre><code class="sh">kubectl logs nginx-pod
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
